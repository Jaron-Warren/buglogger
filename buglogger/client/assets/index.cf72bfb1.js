import{r as t,c as e,o as a,a as o,b as s,F as r,d as n,p as c,e as i,f as l,t as d,g as u,w as b,S as p,C as g,h as m,i as h,j as v,$ as f,k as y,v as w,l as k,m as _,n as B,q as x}from"./vendor.d81e73b6.js";const T=t({user:{},account:{},bugs:[],activeBug:{},notes:[]});const E={name:"App",setup:()=>({appState:e((()=>T))})},C={class:"container-fluid bg-primary pb-5"},A=s("footer",{class:"bg-grey p-4 border-top border-info d-flex justify-content-around align-items-center"},[s("div",{class:" text-info text-left font-weight-bold mdi mdi-bug-outline ftext"}," Site by Jaron Warren ")],-1);E.render=function(t,e,c,i,l,d){const u=n("Navbar"),b=n("router-view");return a(),o(r,null,[s("header",null,[s(u)]),s("main",C,[s(b)]),A],64)};const N={props:{bug:{type:Object,required:!0}},setup:t=>({formatDate(t){const e=t.slice(0,10).split("-");return`${e[1]} / ${e[2]} / ${e[0]}`}})},O=b("data-v-677fc1ea");c("data-v-677fc1ea");const S={class:"\r\n               bug-log-item\r\n               row\r\n               bg-secondary"},I={class:"col-4 border border-info bthick"},D={class:"col-4 border border-info bthick"},R={class:"d-none d-md-block"},j={class:"col-4 col-md-2 border border-info bthick"},P={key:0,class:"text-success font-weight-bold"},$={key:1,class:"text-danger font-weight-bold"},U={class:"col-0 col-md-2 d-none d-md-block border border-info bthick"};i();const L=O(((t,e,r,c,i,b)=>{const p=n("router-link");return a(),o("div",S,[s("div",I,[s(p,{to:{name:"BugDetails",params:{id:r.bug._id}}},{default:O((()=>[l(d(r.bug.title),1)])),_:1},8,["to"])]),s("div",D,[s("img",{src:r.bug.creator.picture,alt:"picture",class:"mr-3 my-2"},null,8,["src"]),s("span",R,d(r.bug.creator.name),1)]),s("div",j,[r.bug.closed?u("",!0):(a(),o("span",P,"Open")),r.bug.closed?(a(),o("span",$,"Closed")):u("",!0)]),s("div",U,d(c.formatDate(r.bug.updatedAt)),1)])}));N.render=L,N.__scopeId="data-v-677fc1ea";var q=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:N});const V=window.location.origin.includes("localhost"),M=V?"http://localhost:3000":"";function H(t,e){if(V)console[t](`[${t}] :: ${(new Date).toLocaleTimeString()} :: `,...e);else{switch(t){case"log":case"assert":return}console[t](`[${t}] :: ${(new Date).toLocaleTimeString()} :: `,...e)}}const z={log(){H("log",arguments)},error(){H("error",arguments)},warn(){H("warn",arguments)},assert(){H("assert",arguments)},trace(){H("trace",arguments)}};class Y{static async confirm(t="Are you sure?",e="You won't be able to revert this!",a="warning",o="Yes, delete it!"){try{return!!(await p.fire({title:t,text:e,icon:a,showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:o})).isConfirmed}catch(s){return!1}}static toast(t="Warning!",e="warning",a="top-end",o=3e3,s=!0){p.fire({title:t,icon:e,position:a,timer:o,timerProgressBar:s,toast:!0,showConfirmButton:!1})}}const W=g.create({baseURL:M,timeout:8e3});const K=new class{async getAll(){try{const t=await W.get("api/bugs/");T.bugs=t.data}catch(t){Y.toast(t)}}async getById(t){try{const e=await W.get(`api/bugs/${t}`);T.activeBug=e.data}catch(e){Y.toast(e)}}async create(t){try{const e=await W.post("api/bugs",t);return T.bugs=[...T.bugs,e.data],e.data}catch(e){Y.toast(e)}}async editbug(t,e){try{const a=await W.put(`api/bugs/${e}`,t);T.activeBug=a.data}catch(a){Y.toast(a)}}async close(t){try{await W.delete(`api/bugs/${t}`),T.activeBug.closed=!0}catch(e){Y.toast(e)}}};let F;const G={},Q=function(t,e){if(!e||0===e.length)return t();if(void 0===F){const t=document.createElement("link").relList;F=t&&t.supports&&t.supports("modulepreload")?"modulepreload":"preload"}return Promise.all(e.map((t=>{if(t in G)return;G[t]=!0;const e=t.endsWith(".css"),a=e?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${t}"]${a}`))return;const o=document.createElement("link");return o.rel=e?"stylesheet":F,e||(o.as="script",o.crossOrigin=""),o.href=t,document.head.appendChild(o),e?new Promise(((t,e)=>{o.addEventListener("load",t),o.addEventListener("error",e)})):void 0}))).then((()=>t()))};function X(t){return()=>function(t){switch(t){case"./pages/AccountPage.vue":return Q((()=>import("./AccountPage.27355f91.js")),["/assets/AccountPage.27355f91.js","/assets/AccountPage.f3fa63f7.css","/assets/vendor.d81e73b6.js"]);case"./pages/BugDetailsPage.vue":return Q((()=>import("./BugDetailsPage.4f68c47a.js")),["/assets/BugDetailsPage.4f68c47a.js","/assets/BugDetailsPage.ce0e10f9.css","/assets/vendor.d81e73b6.js"]);case"./pages/HomePage.vue":return Q((()=>import("./HomePage.a7cf4aaa.js")),["/assets/HomePage.a7cf4aaa.js","/assets/HomePage.3879b42d.css","/assets/vendor.d81e73b6.js"]);default:return Promise.reject(new Error("Unknown variable dynamic import: "+t))}}(`./pages/${t}.vue`)}const J=[{path:"/",name:"Home",component:X("HomePage")},{path:"/bugdetails/:id",name:"BugDetails",component:X("BugDetailsPage")},{path:"/account",name:"Account",component:X("AccountPage"),beforeEnter:v}],Z=m({linkActiveClass:"router-link-active",linkExactActiveClass:"router-link-exact-active",history:h(),routes:J});const tt={setup(){const a=t({newBug:{}});return{state:a,account:e((()=>T.account)),user:e((()=>T.user)),async createBug(){const t=await K.create(a.newBug);a.newBug={},Z.push({name:"BugDetails",params:{id:t._id}}),f("#createNewBug").modal("hide"),f("body").removeClass("modal-open"),f(".modal-backdrop").remove()}}}},et=b("data-v-348de10e");c("data-v-348de10e");const at={class:"modal",id:"createNewBug",tabindex:"-1",role:"dialog","aria-labelledby":"modelTitleId","aria-hidden":"true"},ot={class:"modal-content"},st=s("div",{class:"modal-header bg-dark bcolor bthick"},[s("h2",{class:"modal-title"}," Report Bug "),s("button",{type:"button",class:"close text-light","data-dismiss":"modal","aria-label":"Close"},[s("span",{"aria-hidden":"true"},"×")])],-1),rt={class:"modal-body bg-dark"},nt={class:"container-fluid"},ct={key:0,class:"mb-3"},it={class:"form-group"},lt=s("label",{class:"pr-2",for:"title"},"Title:",-1),dt={class:"form-group"},ut=s("label",{class:"pr-2",for:"description"},"Description",-1),bt=s("div",{class:"modal-footer bg-dark bcolor bthick"},[s("button",{type:"button",class:"btn btn-danger","data-dismiss":"modal"}," Close "),s("button",{type:"submit",class:"btn btn-success"}," create ")],-1);i();const pt=et(((t,e,r,n,c,i)=>(a(),o("div",at,[s("form",{class:"modal-dialog",role:"document",onSubmit:e[3]||(e[3]=k(((...t)=>n.createBug&&n.createBug(...t)),["prevent"]))},[s("div",ot,[st,s("div",rt,[s("div",nt,[n.user.isAuthenticated?(a(),o("div",ct,[s("img",{src:n.account.picture,alt:"picture",class:"mr-2"},null,8,["src"]),l(" "+d(n.account.name),1)])):u("",!0),s("div",it,[lt,y(s("input",{type:"text",class:"form-control",placeholder:"Title...","onUpdate:modelValue":e[1]||(e[1]=t=>n.state.newBug.title=t),minlength:"4",maxlength:"20",required:""},null,512),[[w,n.state.newBug.title]])]),s("div",dt,[ut,y(s("textarea",{type:"text",class:"form-control",placeholder:"Bug description...","onUpdate:modelValue":e[2]||(e[2]=t=>n.state.newBug.description=t),rows:"8",minlength:"20",maxlength:"300",required:""},null,512),[[w,n.state.newBug.description]])])])]),bt])],32)]))));tt.render=pt,tt.__scopeId="data-v-348de10e";var gt=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:tt});const mt=new class{async getById(t){try{const e=await W.get(`api/bugs/${t}/notes`);z.log(e.data),T.notes=e.data}catch(e){Y.toast(e)}}async create(t){try{const e=await W.post("api/notes",t);z.log(e.data),T.notes=[...T.notes,e.data]}catch(e){Y.toast(e)}}async destroy(t){try{await W.delete(`api/notes/${t}`);T.notes=T.notes.filter((e=>e.id!==t))}catch(e){Y.toast(e)}}};const ht={props:{bug:{type:Object,required:!0}},setup(a){const o=t({newNote:{}});return{state:o,account:e((()=>T.account)),user:e((()=>T.user)),async createNote(){o.newNote.bugId=a.bug.id,console.log(o.newNote),await mt.create(o.newNote),o.newNote.body="",f("#createNewNote"+a.bug.id).modal("hide"),f("body").removeClass("modal-open"),f(".modal-backdrop").remove()}}}},vt=b("data-v-022da50e");c("data-v-022da50e");const ft={class:"modal-content"},yt=s("div",{class:"modal-header bg-dark bcolor bthick"},[s("h2",{class:"modal-title"}," Add Note "),s("button",{type:"button",class:"close text-light","data-dismiss":"modal","aria-label":"Close"},[s("span",{"aria-hidden":"true"},"×")])],-1),wt={class:"modal-body bg-dark"},kt={class:"container-fluid"},_t={key:0,class:"mb-3"},Bt={class:"form-group"},xt=s("label",{class:"pr-2",for:"description"},"Note",-1),Tt=s("div",{class:"modal-footer bg-dark bcolor bthick"},[s("button",{type:"button",class:"btn btn-danger","data-dismiss":"modal"}," Close "),s("button",{type:"submit",class:"btn btn-success"}," Add ")],-1);i();const Et=vt(((t,e,r,n,c,i)=>(a(),o("div",{class:"modal",id:"createNewNote"+r.bug.id,tabindex:"-1",role:"dialog","aria-labelledby":"modelTitleId","aria-hidden":"true"},[s("form",{class:"modal-dialog",role:"document",onSubmit:e[2]||(e[2]=k(((...t)=>n.createNote&&n.createNote(...t)),["prevent"]))},[s("div",ft,[yt,s("div",wt,[s("div",kt,[n.user.isAuthenticated?(a(),o("div",_t,[s("img",{src:n.account.picture,alt:"picture",class:"mr-2"},null,8,["src"]),l(" "+d(n.account.name),1)])):u("",!0),s("div",Bt,[xt,y(s("textarea",{type:"text",class:"form-control",placeholder:"Note...","onUpdate:modelValue":e[1]||(e[1]=t=>n.state.newNote.body=t),rows:"8",minlength:"5",maxlength:"100",required:""},null,512),[[w,n.state.newNote.body]])])])]),Tt])],32)],8,["id"]))));ht.render=Et,ht.__scopeId="data-v-022da50e";var Ct=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:ht});const At={props:{bug:{type:Object,required:!0}},setup(a){const o=t({edit:{title:a.bug.title,description:a.bug.description}});return{state:o,account:e((()=>T.account)),user:e((()=>T.user)),async editBug(){try{K.editbug(o.edit,a.bug.id),o.edit={},f("#editBugModal"+a.bug.id).modal("hide"),f("body").removeClass("modal-open"),f(".modal-backdrop").remove()}catch(t){Y.toast(t)}}}}},Nt=b("data-v-180c502a");c("data-v-180c502a");const Ot={class:"modal-content"},St=s("div",{class:"modal-header bg-dark bcolor bthick"},[s("h2",{class:"modal-title"}," Edit Bug Report "),s("button",{type:"button",class:"close text-light","data-dismiss":"modal","aria-label":"Close"},[s("span",{"aria-hidden":"true"},"×")])],-1),It={class:"modal-body bg-dark"},Dt={class:"container-fluid"},Rt={key:0,class:"mb-3"},jt={class:"form-group"},Pt=s("label",{class:"pr-2",for:"title"},"Title:",-1),$t={class:"form-group"},Ut=s("label",{class:"pr-2",for:"description"},"Description",-1),Lt=s("div",{class:"modal-footer bg-dark bcolor bthick"},[s("button",{type:"button",class:"btn btn-danger","data-dismiss":"modal"}," Close "),s("button",{type:"submit",class:"btn btn-success","data-toggle":"","data-target":""}," Confirm ")],-1);i();const qt=Nt(((t,e,r,n,c,i)=>(a(),o("div",{class:"modal",id:"editBugModal"+r.bug.id,tabindex:"-1",role:"dialog","aria-labelledby":"modelTitleId","aria-hidden":"true"},[s("form",{class:"modal-dialog",role:"document",onSubmit:e[3]||(e[3]=k(((...t)=>n.editBug&&n.editBug(...t)),["prevent"]))},[s("div",Ot,[St,s("div",It,[s("div",Dt,[n.user.isAuthenticated?(a(),o("div",Rt,[s("img",{src:n.account.picture,alt:"picture",class:"mr-2"},null,8,["src"]),l(" "+d(n.account.name),1)])):u("",!0),s("div",jt,[Pt,y(s("input",{type:"text",class:"form-control",placeholder:"Title...","onUpdate:modelValue":e[1]||(e[1]=t=>n.state.edit.title=t),minlength:"4",maxlength:"20",required:""},null,512),[[w,n.state.edit.title]])]),s("div",$t,[Ut,y(s("textarea",{type:"text",class:"form-control",placeholder:"Bug description...","onUpdate:modelValue":e[2]||(e[2]=t=>n.state.edit.description=t),rows:"8",minlength:"20",maxlength:"300",required:""},null,512),[[w,n.state.edit.description]])])])]),Lt])],32)],8,["id"]))));At.render=qt,At.__scopeId="data-v-180c502a";var Vt=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:At});const Mt=new class{async getAccount(){try{const t=await W.get("/account");T.account=t.data}catch(t){z.error("HAVE YOU STARTED YOUR SERVER YET???",t)}}};let Ht=!1,zt=[];const Yt="connected",Wt="authenticate",Kt="authenticated",Ft="error";const Gt=new class extends class{constructor(t=M){this.socket=_(t||M),this.on(Yt,this.onConnected).on(Kt,this.onAuthenticated).on(Ft,this.onError)}on(t,e){return this.socket.on(t,e.bind(this)),this}onConnected(t){z.log("[SOCKET_CONNECTION]",t),Ht=!0}onAuthenticated(t){z.log("[SOCKET_AUTHENTICATED]",t);const e=[...zt];zt=[],e.forEach((t=>{this.emit(t.action,t.payload)}))}authenticate(t){this.socket.emit(Wt,t)}onError(t){z.error("[SOCKET_ERROR]",t)}emit(t,e){if(!Ht)return z.log("[ENQUEING_ACTION]",{action:t,payload:e}),zt.push({action:t,payload:e});this.socket.emit(t,e)}}{constructor(){super(),this.on("error",this.onError)}onError(t){z.error("[SOCKET_ERROR]",t),Y.toast(t.message,"error")}},Qt=B({domain:"codeworksclassroom.auth0.com",clientId:"pOXw2OGv1LsYi7LEBmDF04RLkXQvldml",audience:"https://codeworksclassroom.com",useRefreshTokens:!0,onRedirectCallback:t=>{Z.push(t&&t.targetUrl?t.targetUrl:window.location.pathname)}});async function Xt(t){if(!Qt.isAuthenticated)return t;const e=1e3*Qt.identity.exp,a=e<Date.now(),o=e<Date.now()+432e5;return a?await Qt.loginWithPopup():o&&(await Qt.getTokenSilently(),W.defaults.headers.authorization=Qt.bearer,Gt.authenticate(Qt.bearer)),t}Qt.on(Qt.AUTH_EVENTS.AUTHENTICATED,(async function(){W.defaults.headers.authorization=Qt.bearer,W.interceptors.request.use(Xt),T.user=Qt.user,await Mt.getAccount(),Gt.authenticate(Qt.bearer)}));const Jt={setup:()=>({state:t({dropOpen:!1}),user:e((()=>T.user)),async login(){Qt.loginWithPopup()},async logout(){Qt.logout({returnTo:window.location.origin})}})},Zt=b("data-v-032c39eb");c("data-v-032c39eb");const te={class:"navbar navbar-dark navbar-expand-lg bg-grey border-bottom border-info"},ee=s("button",{class:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbarText","aria-controls":"navbarText","aria-expanded":"false","aria-label":"Toggle navigation"},[s("span",{class:"navbar-toggler-icon"})],-1),ae={class:"collapse navbar-collapse justify-content-around",id:"navbarText"},oe={key:0,class:"btn btn-secondary border border-info text-info font-weight-bold","data-toggle":"modal","data-target":"#createNewBug"},se=l(" Report New Bug "),re=s("i",{class:"mdi mdi-bug"},null,-1),ne=s("button",{class:"btn btn-secondary border border-info text-info font-weight-bold"},[s("i",{class:"mdi mdi-home"})],-1),ce={class:"navbar-text"},ie={key:1,class:"dropdown action"},le={class:"mx-3"},de=s("div",{class:"list-group-item list-group-item-action hoverable"}," Account ",-1);i();const ue=Zt(((t,e,c,i,l,b)=>{const p=n("router-link"),g=n("CreateModal");return a(),o(r,null,[s("nav",te,[ee,s("div",ae,[i.user.isAuthenticated?(a(),o("button",oe,[se,re])):u("",!0),s(p,{to:{name:"Home"}},{default:Zt((()=>[ne])),_:1}),s("span",ce,[i.user.isAuthenticated?(a(),o("div",ie,[s("div",{class:"dropdown-toggle",onClick:e[2]||(e[2]=t=>i.state.dropOpen=!i.state.dropOpen)},[s("img",{src:i.user.picture,alt:"user photo",height:"40",class:"rounded"},null,8,["src"]),s("span",le,d(i.user.name),1)]),s("div",{class:["dropdown-menu p-0 list-group w-100",{show:i.state.dropOpen}],onClick:e[4]||(e[4]=t=>i.state.dropOpen=!1)},[s(p,{to:{name:"Account"}},{default:Zt((()=>[de])),_:1}),s("div",{class:"list-group-item list-group-item-action hoverable",onClick:e[3]||(e[3]=(...t)=>i.logout&&i.logout(...t))}," logout ")],2)])):(a(),o("button",{key:0,class:"btn btn-outline-primary text-uppercase",onClick:e[1]||(e[1]=(...t)=>i.login&&i.login(...t))}," Login "))])])]),i.user.isAuthenticated?(a(),o(g,{key:0})):u("",!0)],64)}));Jt.render=ue,Jt.__scopeId="data-v-032c39eb";var be=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:Jt});const pe={props:{note:{type:Object,required:!0}},setup:t=>({account:e((()=>T.account)),async destroyNote(){await mt.destroy(t.note.id)}})},ge=b("data-v-387d4baa");c("data-v-387d4baa");const me={class:"col-12 mt-3"},he={key:0,class:"mb-3 border-bottom border-info"};i();const ve=ge(((t,e,r,n,c,i)=>(a(),o("div",me,[r.note?(a(),o("div",he,[s("img",{src:r.note.creator.picture,alt:"picture",class:"mr-2"},null,8,["src"]),l(" "+d(r.note.creator.name)+" ",1),r.note.creatorId===n.account.id?(a(),o("i",{key:0,class:"mdi mdi-trash-can ml-5 action",onClick:e[1]||(e[1]=(...t)=>n.destroyNote&&n.destroyNote(...t))})):u("",!0),s("p",null,d(r.note.body),1)])):u("",!0)]))));pe.render=ve,pe.__scopeId="data-v-387d4baa";var fe=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:pe});const ye=x(E);!function(t){const e={"./components/BugLogItem.vue":q,"./components/CreateModal.vue":gt,"./components/CreateNote.vue":Ct,"./components/EditBug.vue":Vt,"./components/Navbar.vue":be,"./components/NoteItem.vue":fe};Object.entries(e).forEach((([e,a])=>{const o=a.name||e.substr(e.lastIndexOf("/")+1).replace(/\.\w+$/,"");t.component(o,a.default)}))}(ye),ye.use(Z).mount("#app");export{T as A,Y as P,K as b,mt as n,Z as r};
